---
title: 系统状态监测命令
---




## 系统状态监测命令


### 显示或设置网络设备 - ifconfig

ifconfig 命令是"`network interfaces configuring`" 的缩写，用于配置和显示 Linux 内核中网络接口的网络参数（网卡配置与网络状态等信息）。

使用 ifconfig 命令来查看本机当前的网卡配置与网络状态等信息时，其实主要查看的就是网卡名称、inet 参数后面的 IP 地址、ether 参数后面的网卡物理地址（又称为 MAC 地址），以及 RX、TX 的接收数据包与发送数据包的个数及累计流量（即下面加粗的信息内容）：

用 ifconfig 命令配置的网卡信息，在网卡重启后机器重启后，配置就不存在。要想将上述的配置信息永远的存的电脑里，那就要修改网卡的配置文件了。

**语法格式：**ifconfig [参数]

**常用参数：**

| 参数      | 功能                         |
| --------- | ---------------------------- |
| add<地址> | 设置网络设备 IPv6 的 IP 地址 |
| del<地址> | 删除网络设备 IPv6 的 IP 地址 |
| down      | 关闭指定的网络设备           |
| up        | 启动指定的网络设备           |
| IP 地址   | 指定网络设备的 IP 地址       |


### 显示系统信息 - uname

uname 命令是"`Unix name`"的缩写，用于查看系统内核与系统版本等信息（主机名、内核版本号、硬件架构等）。

在使用 uname 命令时，一般会固定搭配上-a 参数来完整地查看当前系统的内核名称、主机名、内核发行版本、节点名、系统时间、硬件名称、硬件平台、处理器类型以及操作系统名称等信息。如果未指定任何选项，其效果相当于执行"uname -s"命令，即显示系统内核的名字。

**语法格式：**uname [参数]

**常用参数：**

| 参数 | 功能                 |
| ---- | -------------------- |
| -a   | 显示系统所有相关信息 |
| -m   | 显示计算机硬件架构   |
| -n   | 显示主机名称         |
| -r   | 显示内核发行版本号   |
| -s   | 显示内核名称         |
| -v   | 显示内核版本         |
| -p   | 显示主机处理器类型   |
| -o   | 显示操作系统名称     |
| -i   | 显示硬件平台         |

![02-uname](C:\Users\Administrator\Pictures\Typora\02-uname.png)


### 查看系统负载信息 - uptime

uptime 用于查看系统的负载信息。

命令显示系统已经运行了多长时间，信息显示依次为：现在时间、系统已经运行了多长时间、目前有多少登录用户、系统在过去的 1 分钟、5 分钟和 15 分钟内的平均负载。；负载值越低越好，尽量不要长期超过 1，在生产环境中不要超过 5。

**语法格式**：uptime [参数]

**常用参数**:

| 参数 | 功能                                           |
| ---- | ---------------------------------------------- |
| -p   | 以漂亮的格式显示机器正常运行的时间             |
| -s   | 系统自开始运行时间，格式为 yyyy-mm-dd hh:mm:ss |
| -h   | 显示帮助信息                                   |

![02-uptime](C:\Users\Administrator\Pictures\Typora\02-uptime.png)


### 显示内存情况 - free

free 命令能够显示系统中物理上的空闲和已用内存，还有交换内存，同时，也能显示被内核使用的缓冲和缓存。这些信息是通过解析文件 `/proc/meminfo` 而收集到的。

不带任何选项运行 free 命令会显示系统内存，包括空闲、已用、交换、缓冲、缓存和交换的内存总数。

**语法格式：**free [参数]

**常用参数：**

| 参数 | 功能                         |
| ---- | ---------------------------- |
| -b   | 以 Byte 显示内存使用情况     |
| -k   | 以 kb 为单位显示内存使用情况 |
| -m   | 以 mb 为单位显示内存使用情况 |
| -g   | 以 gb 为单位显示内存使用情况 |
| -s   | 持续显示内存                 |
| -t   | 显示内存使用总合             |

![02-free](C:\Users\Administrator\Pictures\Typora\02-free.png)

| total    | used   | free   | shared           | buffers          | cached       |
| -------- | ------ | ------ | ---------------- | ---------------- | ------------ |
| 内存总量 | 已用量 | 空闲量 | 进程共享的内存量 | 磁盘缓冲的内存量 | 缓存的内存量 |


### 打印当前用户登录信息 - who

who 命令用来打印当前登录用户信息，包含了系统的启动时间 、 活动进程 、 使用者 ID、使用终端等信息，是系统管理员了解系统运行状态的常用命令。

who 命令的输出信息默认来自文件"`/var/log/utmp`"和"`/var/log/wtmp`"。

**语法格式：** who [参数][选项]

**常用参数：**

| 参数 | 功能                                     |
| ---- | ---------------------------------------- |
| -a   | 打印全面信息                             |
| -b   | 打印系统最近启动时间                     |
| -d   | 打印死掉的进程                           |
| -l   | 打印系统登录进程                         |
| -H   | 带有列标题打印用户名，登录终端和登录时间 |
| -t   | 打印系统上次锁定时间                     |
| -u   | 打印已登录用户列表                       |

![02-who](C:\Users\Administrator\Pictures\Typora\02-who.png)


### 显示用户最近登录信息 - last

last 命令的作用是显示近期用户或终端的登录情况，通过查看系统记录的日志文件内容，进而使管理员可以获知谁曾经或者企图连接系统。

单独执行 last 命令，它会读取`/var/log/wtmp`的文件，并把该给文件的内容记录的登入系统的用户名单全部显示出来。默认显示 wtmp 的记录，btmp 能显示的更详细，可以显示远程登录，例如 ssh 登录。

**语法格式：**last [参数][选项]

**常用参数：**

| 参数    | 功能                       |
| ------- | -------------------------- |
| -R      | 省略 hostname 的栏位       |
| usename | 展示 username 的登入讯息   |
| tty     | 限制登入讯息包含的终端代号 |

![02-last](C:\Users\Administrator\Pictures\Typora\02-last.png)


### 显示历史执行 - history

history 命令用于显示历史执行过的命令。

历史命令是被保存在内存中的，当退出或者登录 shell 时，会自动保存或读取。在内存中，历史命令仅能够存储 1000 条历史命令，该数量是由环境变量`HISTSIZE`进行控制。如果觉得 1000 不够用，还可以自定义/etc/profile 文件中的 HISTSIZE 变量值。在使用 history 命令时，如果使用-c 参数则会清空所有的命令历史记录。

该命令单独使用时，仅显示历史命令，在命令行中，可以使用符号`!`执行指定序号的历史命令。例如，要执行第 2 个历史命令，则输入`!2`。

**语法格式:** history [参数][目录]

**常用参数：**

| 参数 | 功能                                                                                                   |
| ---- | ------------------------------------------------------------------------------------------------------ |
| -a   | 将当前 shell 会话的历史命令追加到命令历史文件中,命令历史文件是保存历史命令的配置文件                   |
| -c   | 清空当前历史命令列表                                                                                   |
| -d   | 删除历史命令列表中指定序号的命令                                                                       |
| -n   | 从命令历史文件中读取本次 Shell 会话开始时没有读取的历史命令                                            |
| -r   | 读取命令历史文件到当前的 Shell 历史命令内存缓冲区                                                      |
| -s   | 将指定的命令作为单独的条目加入命令历史内存缓冲区。在执行添加之前先删除命令历史内存缓冲区中最后一条命令 |
| -w   | 把当前的 shell 历史命令内存缓冲区的内容写入命令历史文件                                                |

![02-history](C:\Users\Administrator\Pictures\Typora\02-history.png)


### 收集系统服务配置信息 - sosreport

sosreport 命令用于收集系统配置及架构信息并输出诊断文档。

sosreport 在 github 上的托管页面为：[https://github.com/sosreport/sos](https://github.com/sosreport/sos) 。

sosreport 是一个类型于 supportconfig 的工具，是 python 编写的一个工具。当 Linux 系统出现故障需要联系技术支持人员时，大多数时候都要先使用这个命令来简单收集系统的运行状态和服务配置信息，以便让技术支持人员能够远程解决一些小问题，亦或让他们能提前了解某些复杂问题。如果使用的是正版 redhat，在出现系统问题，寻求官方支持时，官方一般也会通过 sosreport 将收集的信息进行分析查看。需要注意的是在一些老的 redhat 发行版中叫 sysreport ------ 如 redhat4.5 之前的版本中。

在下图的输出信息中，紫色的部分是收集好的资料压缩文件以及校验码，将其发送给技术支持人员即可：

![02-history](C:\Users\Administrator\Pictures\Typora\02-sosreport.png)
